<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Joke Vault</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">
</head>
<body>
    <div id="container">
        <h1>The Joke Vault</h1>

        <nav>
            <a href="/db/favorites">View Favorite Jokes</a>
        </nav>

        <form action="/get-jokes" method="get" id="jokeForm">
            <div class="formItem">
                <label for="type"><strong>Select Joke Category: </strong></label>
                <select name="type" id="type">
                    <option value="random">Random</option>
                    <option value="general">General</option>
                    <option value="knock-knock">Knock-knock</option>
                    <option value="programming">Programming</option>
                    <option value="dad">Dad</option>
                </select>
            </div>

            <div class="formItem">
                <input type="reset" value="Reset Form">
                <input type="submit" value="Get Joke">
            </div>
        </form>

        <% if (joke) { %>
            <hr>
            <h2>Your Joke:</h2>
            <div class="joke-card">
                <p><strong>Type:</strong> <%= joke.type %></p>
                <p><strong>Setup:</strong> <%= joke.setup %></p>
                <p><strong>Punchline:</strong> <%= joke.punchline %></p>

                <form action="/db/save" method="post" style="display: inline;">
                    <input type="hidden" name="setup" value="<%= joke.setup %>">
                    <input type="hidden" name="punchline" value="<%= joke.punchline %>">
                    <input type="hidden" name="type" value="<%= joke.type %>">
                    <button type="submit">Add to Favorites</button>
                </form>
            </div>
        <% } else if (error) { %>
            <p style="color: red;"><%= error %></p>
        <% } %>
    </div>
</body>
</html>